(function(e){if(typeof define==="function"&&define.amd){define(["jquery"],e)}else if(typeof exports==="object"){module.exports=e($||require("jquery"))}else{e(jQuery)}})(function(e){"use strict";var t="styler",i="-"+t,s={wrapper:"form",selectTriggerHtml:'<div class="jq-selectbox__trigger-arrow"></div>',selectSearch:false,selectSearchLimit:10,selectVisibleOptions:0,singleSelectzIndex:"100",selectSmartPositioning:true,checkboxIndeterminate:false,passwordSwitchHtml:'<button type="button" class="'+t+'"></button>',locale:"ru",locales:{ru:{filePlaceholder:"Файл не выбран",fileBrowse:"Обзор...",fileNumber:"Выбрано файлов: %s",selectPlaceholder:"Выберите...",selectSearchNotFound:"Совпадений не найдено",selectSearchPlaceholder:"Поиск...",passwordShow:"Показать",passwordHide:"Скрыть"},en:{filePlaceholder:"No file selected",fileBrowse:"Browse...",fileNumber:"Selected files: %s",selectPlaceholder:"Select...",selectSearchNotFound:"No matches found",selectSearchPlaceholder:"Search...",passwordShow:"Show",passwordHide:"Hide"},ua:{filePlaceholder:"Файл не обраний",fileBrowse:"Огляд...",fileNumber:"Обрано файлів: %s",selectPlaceholder:"Виберіть...",selectSearchNotFound:"Збігів не знайдено",selectSearchPlaceholder:"Пошук...",passwordShow:"Показати",passwordHide:"Сховати"}},onSelectOpened:function(){},onSelectClosed:function(){},onFormStyled:function(){}};function l(t,i){this.element=t;this.options=e.extend({},s,i);var l=this.options.locale;if(this.options.locales[l]!==undefined){e.extend(this.options,this.options.locales[l])}this.init()}function a(e){if(e.attr("id")!==undefined&&e.attr("id")!==""){this.id=e.attr("id")+i}this.title=e.attr("title");this.classes=e.attr("class");this.data=e.data()}l.prototype={init:function(){var s=this,l=e(this.element),n=this.options;var r=navigator.userAgent.match(/(iPad|iPhone|iPod)/i)&&!navigator.userAgent.match(/(Windows\sPhone)/i),d=navigator.userAgent.match(/Android/i)&&!navigator.userAgent.match(/(Windows\sPhone)/i);if(l.is(":checkbox")){var c=function(i){var s=new a(i),l=i.parent(),o=e('<div class="jq-checkbox"><div class="jq-checkbox__div"></div></div>').attr({id:s.id,title:s.title,unselectable:"on"}).addClass(s.classes).data(s.data);i.addClass("jq-hidden").after(o).prependTo(o);o.on("repaint",function(){if(i.is(":checked")||i.is(":indeterminate")){if(i.is(":indeterminate")){o.removeClass("checked").addClass("indeterminate")}else{o.removeClass("indeterminate").addClass("checked")}}else{o.removeClass("indeterminate").removeClass("checked")}o.toggleClass("disabled",i.is(":disabled"))}).on("click",function(e){e.preventDefault();if(!o.is(".disabled")){if(i.is(":checked")||i.is(":indeterminate")){i.prop("checked",n.checkboxIndeterminate&&i.is(":indeterminate"));i.prop("indeterminate",false)}else{if(n.checkboxIndeterminate){i.prop("checked",false).prop("indeterminate",true)}else{i.prop("checked",true).prop("indeterminate",false)}}i.focus().trigger("change").triggerHandler("click")}});i.closest("label").add('label[for="'+i.attr("id")+'"]').on("click."+t,function(t){if(!e(t.target).is("a")&&!e(t.target).closest(o).length){o.triggerHandler("click");t.preventDefault()}});i.on("change."+t,function(){o.triggerHandler("repaint")}).on("keydown."+t,function(e){if(e.which===32){e.preventDefault();o.triggerHandler("click")}}).on("focus."+t,function(){if(!o.is(".disabled")){o.addClass("focused")}}).on("blur."+t,function(){o.removeClass("focused")});o.triggerHandler("repaint")};c(l)}else if(l.is(":radio")){var f=function(i){var s=new a(i),l=e('<div class="jq-radio"><div class="jq-radio__div"></div></div>').attr({id:s.id,title:s.title,unselectable:"on"}).addClass(s.classes).data(s.data);i.addClass("jq-hidden").after(l).prependTo(l);l.on("repaint",function(){i.parent().toggleClass("checked",i.is(":checked"));l.toggleClass("disabled",i.is(":disabled"))}).on("click",function(t){t.preventDefault();if(!l.is(".disabled")){var s=i.attr("name");var a=l.closest(n.wrapper).find('input[name="'+s+'"]:radio');if(a.length<=0){a=l.closest("#"+s).find('input[name="'+s+'"]:radio')}if(a.length<=0){a=e("body").find('input[name="'+s+'"]:radio')}a.prop("checked",false).parent().removeClass("checked");i.prop("checked",true).focus().trigger("change").triggerHandler("click")}});i.on("change."+t,function(e){l.triggerHandler("repaint")}).on("keydown."+t,function(e){if(e.which===32){e.preventDefault();l.trigger("click")}}).on("focus."+t,function(){if(!l.is(".disabled")){l.addClass("focused")}}).on("blur."+t,function(){l.removeClass("focused")});i.closest("label").add('label[for="'+i.attr("id")+'"]').on("click."+t,function(t){if(!e(t.target).is("a")&&!e(t.target).closest(l).length){l.triggerHandler("click");t.preventDefault()}});l.triggerHandler("repaint")};f(l)}else if(l.is(":file")){var h=function(i){var s=new a(i),l=i.data("placeholder"),o=i.data("browse");if(l===undefined){l=n.filePlaceholder}if(o===undefined||o===""){o=n.fileBrowse}var r=e('<div class="jq-file">'+'<div class="jq-file__name">'+l+"</div>"+'<div class="jq-file__browse">'+o+"</div>"+"</div>").attr({id:s.id,title:s.title}).addClass(s.classes).data(s.data);i.addClass("jq-hidden").after(r).appendTo(r);r.on("repaint",function(){var t=i.val(),s=e("div.jq-file__name",r);if(i.is("[multiple]")){var a=i[0].files.length;t="";if(a>0){var o=i.data("number");if(o===undefined){o=n.fileNumber}o=o.replace("%s",a);t=o}}s.text(t.replace(/.+[\\\/]/,"")||l);r.toggleClass("changed",t!=="");r.toggleClass("disabled",i.is(":disabled"))});i.on("change."+t,function(){r.triggerHandler("repaint")}).on("focus."+t,function(){r.addClass("focused")}).on("blur."+t,function(){r.removeClass("focused")}).on("click."+t,function(){r.removeClass("focused")});r.triggerHandler("repaint")};h(l)}else if(l.is('input[type="number"]')){var u=function(i){var s=new a(i),l=e('<div class="jq-number">'+'<div class="jq-number__spin minus"></div>'+'<div class="jq-number__spin plus"></div>'+"</div>").attr({id:s.id,title:s.title}).addClass(s.classes).data(s.data);i.after(l).prependTo(l).wrap('<div class="jq-number__field"></div>');var o=i.attr("min")||undefined,n=i.attr("max")||undefined,r=Number(i.attr("step"))||1,d=null,c=null;var f=function(t){var s=i.val(),l;if(!e.isNumeric(s)){s=0;i.val("0").change()}if(t.is(".minus")){l=Number(s)-r}else if(t.is(".plus")){l=Number(s)+r}var a=(r.toString().split(".")[1]||[]).length.prototype,d="1";if(a>0){while(d.length<=a){d=d+"0"}l=Math.round(l*d)/d}if(e.isNumeric(o)&&e.isNumeric(n)){if(l>=o&&l<=n){i.val(l).change()}}else if(e.isNumeric(o)&&!e.isNumeric(n)){if(l>=o){i.val(l).change()}}else if(!e.isNumeric(o)&&e.isNumeric(n)){if(l<=n){i.val(l).change()}}else{i.val(l).change()}};l.on("repaint",function(){l.toggleClass("disabled",i.is(":disabled"))}).on("mousedown","div.jq-number__spin",function(){if(i.is(":disabled")){return}var t=e(this);f(t);d=setTimeout(function(){c=setInterval(function(){f(t)},40)},350)}).on("mouseup mouseout","div.jq-number__spin",function(){if(i.is(":disabled")){return}clearTimeout(d);clearInterval(c)});i.on("focus."+t,function(){l.addClass("focused")}).on("blur."+t,function(){l.removeClass("focused")});l.triggerHandler("repaint")};u(l)}else if(l.is('input[type="password"]')){var p=function(i){var s=e('<div class="jq-password__switch">'+n.passwordSwitchHtml+"</div>"),l=e('<div class="jq-password">').append(s),a=s.children("button").length>0?s.children("button"):s;if(a.html()===""&&n.passwordShow!==""){a.html(n.passwordShow);if(s.children("button").length<=0){s.addClass("jq-password__switch-text")}}i.after(l).prependTo(l);l.on("repaint",function(){l.toggleClass("disabled",i.is(":disabled"));a.prop("disabled",i.is(":disabled"))}).on("click",".jq-password__switch",function(){var t=e(this),s=t.closest(".jq-password"),l=s.is(".jq-password_seen");s.toggleClass("jq-password_seen",!l);if(n.passwordShow!==""&&n.passwordHide!==""){a.html(l?n.passwordShow:n.passwordHide)}i.attr("type",l?"password":"text")});i.on("focus."+t,function(){l.addClass("focused")}).on("blur."+t,function(){l.removeClass("focused")});l.triggerHandler("repaint")};p(l)}else if(l.is('input[type="hidden"]')){return false}else if(l.is("select")){var v=function(s){var l=e("option",s);function c(e){var t=e.prop("scrollHeight")-e.outerHeight(),i=null,s=null;e.off("mousewheel DOMMouseScroll").on("mousewheel DOMMouseScroll",function(l){i=l.originalEvent.detail<0||l.originalEvent.wheelDelta>0?1:-1;s=e.scrollTop();if(s>=t&&i<0||s<=0&&i>0){l.stopPropagation();l.preventDefault()}})}function f(t){var s=e("<ul>");for(var l=0;l<t.length;l++){var a=t.eq(l),o=a.attr("class")||"",n=(a.attr("id")||"")!==""?a.attr("id")+i:"",r=a.attr("title");if(a.is(":selected")){o+=(o!==""?" ":"")+"selected sel"}if(a.is(":disabled")){o+=(o!==""?" ":"")+"disabled"}var d={title:r,data:a.data(),html:a.html()};if(n!==""){d["id"]=n}if(a.parent().is("optgroup")){var c="";if(a.parent().attr("class")!==undefined){c=" "+a.parent().attr("class")}if(a.is(":first-child")){e("<li>",{"class":"optgroup"+c,html:a.parent().attr("label")}).appendTo(s)}e("<li>",e.extend(d,{"class":"option"})).addClass(o).addClass(c).data("jqfs-class",a.attr("class")).appendTo(s)}else{e("<li>",d).addClass(o).data("jqfs-class",a.attr("class")).appendTo(s)}}return s}function h(i){var s=new a(i),d=f(l),h="",u=i.data("placeholder")||n.selectPlaceholder,p=i.data("search")||n.selectSearch,v=i.data("search-limit")||n.selectSearchLimit,g=i.data("search-not-found")||n.selectSearchNotFound,m=i.data("search-placeholder")||n.selectSearchPlaceholder,b=i.data("z-index")||n.singleSelectzIndex,w=i.data("smart-positioning")||n.selectSmartPositioning;if(p){h='<div class="jq-selectbox__search"><input type="search" autocomplete="off" placeholder="'+m+'"></div>'+'<div class="jq-selectbox__not-found">'+g+"</div>"}var C=e('<div class="jq-selectbox__dropdown" style="position: absolute">'+h+"</div>").append(d);var q=e('<div class="jq-selectbox jqselect">'+'<div class="jq-selectbox__select">'+'<div class="jq-selectbox__select-text"></div>'+'<div class="jq-selectbox__trigger">'+n.selectTriggerHtml+"</div>"+"</div></div>").css({zIndex:b}).attr({id:s.id,title:s.title}).data(s.data).addClass(s.classes).append(C);i.after(q).prependTo(q);var j=e("div.jq-selectbox__select",q),x=e("div.jq-selectbox__select-text",q),_=l.filter(":selected");var y=e("ul",C),k=e("li",C).css({display:"inline-block"}),S=e("input",C),H=e("div.jq-selectbox__not-found",C).hide(),T=0,P=0;if(k.length<v){S.parent().hide()}k.each(function(){var t=e(this);if(t.innerWidth()>T){T=t.innerWidth();P=t.width()}});k.css({display:""});if(x.is(".placeholder")&&x.width()>T){x.width(x.width())}else{var N=q.clone().appendTo("body").width("auto");var A=N.outerWidth();N.remove();if(A===q.outerWidth()){x.width(P)}}if(T>q.width()){C.width(T)}if(l.first().text()===""&&i.data("placeholder")!==""){k.first().hide()}i.addClass("jq-hidden");var I=q.outerHeight(true)||0,D=S.parent().outerHeight(true)||0,z=y.css("max-height")||0,K=k.filter(".selected"),O=I||0;if(k.data("li-height")===undefined){k.data("li-height",k.outerHeight())}if(C.css("left")==="auto"){C.css({left:0})}if(C.css("top")==="auto"){C.css({top:I})}C.hide();if(K.length){if(l.first().text()!==_.text()){q.addClass("changed")}q.data("jqfs-class",K.data("jqfs-class"));q.addClass(K.data("jqfs-class"))}q.on("repaint",function(){var e=l.filter(":selected"),t=l.filter(":disabled");if(e.val()===""){x.html(u).addClass("placeholder")}else{x.html(e.text()).removeClass("placeholder")}if(q.data("jqfs-class")){q.removeClass(q.data("jqfs-class"))}q.data("jqfs-class",e.attr("class"));q.addClass(e.attr("class"));k.removeClass("selected sel").not(".optgroup").eq(i[0].selectedIndex).addClass("selected sel");k.removeClass("disabled").not(".optgroup").filter(function(e){return l.eq(e).is(":disabled")}).addClass("disabled");q.toggleClass("changed",l.first().text()!==k.filter(".selected").text());q.toggleClass("disabled",i.is(":disabled"))});j.on("click",function(){if(i.is(":disabled")){return}if(e("div.jq-selectbox").filter(".opened").length){n.onSelectClosed.call(e("div.jq-selectbox").filter(".opened"))}i.focus();if(r){return}var t=e(window),s=k.data("li-height")||0,a=q.offset().top||0,o=t.height()-I-(a-t.scrollTop()),d=i.data("visible-options")||n.selectVisibleOptions,f=d>0&&d<6?h:s*5,h=d===0?"auto":s*d;var u=function(e){var t=function(){e.css("max-height",Math.floor((o-D-s)/s)*s)};t();e.css("max-height",z!=="none"&&z>0?z:h);if(o<C.outerHeight()+s){t()}};var p=function(e){var i=function(){e.css("max-height",Math.floor((a-t.scrollTop()-s-D)/s)*s)};i();e.css("max-height",z!=="none"&&z>0?z:h);if(a-t.scrollTop()-s<C.outerHeight()+s){i()}};if(w===true||w===1){if(o>f+D+20){u(y);q.removeClass("dropup").addClass("dropdown")}else{p(y);q.removeClass("dropdown").addClass("dropup")}}else if(w===false||w===0){if(o>f+D+20){u(y);q.removeClass("dropup").addClass("dropdown")}}if(q.offset().left+C.outerWidth()>t.width()){C.css({left:"auto",right:0})}e("div.jqselect").css({zIndex:b-1}).removeClass("opened");q.css({zIndex:b});if(C.is(":hidden")){e("div.jq-selectbox__dropdown:visible").hide();C.show();q.addClass("opened focused");n.onSelectOpened.call(q)}else{C.hide();q.removeClass("opened dropup dropdown");if(e("div.jq-selectbox").filter(".opened").length){n.onSelectClosed.call(q)}}if(S.length){S.val("").keyup();H.hide();S.keyup(function(){var t=e(this).val();k.each(function(){if(!e(this).html().match(new RegExp(".*?"+t+".*?","i"))){e(this).hide()}else{e(this).show()}});if(l.first().text()===""&&i.data("placeholder")!==""){k.first().hide()}if(k.filter(":visible").length<1){H.show()}else{H.hide()}})}if(k.filter(".selected").length){if(i.val()===""){y.scrollTop(0)}else{if(y.innerHeight()/s%2!==0){s=s/2}y.scrollTop(y.scrollTop()+k.filter(".selected").position().top-y.innerHeight()/2+s)}}c(y)});var M=k.filter(".selected").text();k.on("hover",function(){e(this).siblings().removeClass("selected")}).on("click",function(){var t=e(this);if(t.is(".disabled, .optgroup")){return}i.focus();if(!t.is(".selected")){var s=t.index();s-=t.prevAll(".optgroup").length;l.prop("selected",false).eq(s).prop("selected",true);i.change()}C.hide();q.removeClass("opened dropup dropdown");n.onSelectClosed.call(q)});C.on("mouseout",function(){e("li.sel",C).addClass("selected")});i.on("change."+t,function(){q.triggerHandler("repaint")}).on("focus."+t,function(){q.addClass("focused");e("div.jqselect").not(".focused").removeClass("opened dropup dropdown").find("div.jq-selectbox__dropdown").hide()}).on("blur."+t,function(){q.removeClass("focused")}).on("keydown."+t+" keyup."+t,function(e){var t=k.data("li-height");if(e.which===38||e.which===37||e.which===33||e.which===36){if(i.val()===""){y.scrollTop(0)}else{y.scrollTop(y.scrollTop()+k.filter(".selected").position().top)}}if(e.which===40||e.which===39||e.which===34||e.which===35){y.scrollTop(y.scrollTop()+k.filter(".selected").position().top-y.innerHeight()+t)}if(e.which===13){e.preventDefault();C.hide();q.removeClass("opened dropup dropdown");n.onSelectClosed.call(q)}}).on("keydown."+t,function(e){if(e.which===32){e.preventDefault();j.click()}});if(!o.registered){e(document).on("click",o);o.registered=true}q.triggerHandler("repaint")}function u(i){var s=new a(i),o=f(l),n=e('<div class="jq-select-multiple jqselect"></div>').attr({id:s.id,title:s.title}).addClass(s.classes).data(s.data).append(o);i.after(n).prependTo(n);var r=e("ul",n),d=e("li",n).attr("unselectable","on"),h=i.attr("size")||4,u=r.outerHeight()||0,p=d.outerHeight()||0;r.css({height:p*h});if(u>n.height()){r.css("overflowY","scroll");c(r);if(d.filter(".selected").length){r.scrollTop(r.scrollTop()+d.filter(".selected").position().top)}}i.addClass("jq-hidden");n.on("repaint",function(){var t=[];l.filter(":selected").each(function(){t.push(e(this).data("optionIndex"))});d.removeClass("selected").not(".optgroup").filter(function(i){return e.inArray(i,t)>-1}).addClass("selected");d.removeClass("disabled").not(".optgroup").filter(function(e){return l.eq(e).is(":disabled")}).addClass("disabled");n.toggleClass("disabled",i.is(":disabled"))});d.click(function(t){var s=e(this);if(i.is(":disabled")||s.is(".disabled, .optgroup")){return}i.focus();if(!t.ctrlKey&&!t.metaKey){s.addClass("selected")}if(!t.shiftKey){s.addClass("first")}if(!t.ctrlKey&&!t.metaKey&&!t.shiftKey){s.siblings().removeClass("selected first")}if(t.ctrlKey||t.metaKey){s.toggleClass("selected first",!s.is(".selected"));s.siblings().removeClass("first")}if(t.shiftKey){var a=false,o=false;s.siblings().removeClass("selected").siblings(".first").addClass("selected");s.prevAll().each(function(){a=a||e(this).is(".first")});s.nextAll().each(function(){o=o||e(this).is(".first")});if(a){s.prevAll().each(function(){if(e(this).is(".selected")){return false}else{e(this).not(".disabled, .optgroup").addClass("selected")}})}if(o){s.nextAll().each(function(){if(e(this).is(".selected")){return false}else{e(this).not(".disabled, .optgroup").addClass("selected")}})}if(d.filter(".selected").length===1){s.addClass("first")}}l.prop("selected",false);d.filter(".selected").each(function(){var t=e(this),i=t.index()-(t.is(".option")?t.prevAll(".optgroup").length:0);l.eq(i).prop("selected",true)});i.change()});l.each(function(t){e(this).data("optionIndex",t)});i.on("change."+t,function(){n.triggerHandler("repaint")}).on("focus."+t,function(){n.addClass("focused")}).on("blur."+t,function(){n.removeClass("focused")});if(u>n.height()){i.on("keydown."+t,function(e){if(e.which===38||e.which===37||e.which===33){r.scrollTop(r.scrollTop()+d.filter(".selected").position().top-p)}if(e.which===40||e.which===39||e.which===34){r.scrollTop(r.scrollTop()+d.filter(".selected:last").position().top-r.innerHeight()+p*2)}})}n.triggerHandler("repaint")}if(s.is("[multiple]")){if(d||r){return}u(s)}else{if(s.attr("size")>1){u(s)}else{h(s)}}};v(l)}else if(l.is("input")||l.is("textarea")||l.is("button")||l.is("a.button")){l.addClass(t)}else if(l.is(":reset")){l.on("click",function(){setTimeout(function(){l.closest(n.wrapper).children().trigger("repaint")},1)})}l.on("refresh reinitialize",function(){s.reinitialize()})},destroy:function(i){var s=e(this.element);if(!i){s.removeData("_"+t)}s.removeClass("jq-hidden");if(s.is(":checkbox")||s.is(":radio")){s.off("."+t+", refresh").removeAttr("style").parent().before(s).remove();s.closest("label").add('label[for="'+s.attr("id")+'"]').off("."+t)}else if(s.is('input[type="number"]')){s.off("."+t+", refresh").closest(".jq-number").before(s).remove()}else if(s.is('input[type="password"]')){s.off("."+t+", refresh").closest(".jq-password").before(s).remove()}else if(s.is(":file")||s.is("select")){s.off("."+t+", refresh").removeAttr("style").parent().before(s).remove()}},reinitialize:function(t){this.destroy(true);this.options=e.extend({},this.options,t);this.init()}};e.fn[t]=function(i){var s=arguments;if(i===undefined||typeof i==="object"){this.each(function(){if(!e.data(this,"_"+t)){e.data(this,"_"+t,new l(this,i))}else{e(this).styler("reinitialize")}}).promise().done(function(){var i=e(this[0]).data("_"+t);if(i){i.options.onFormStyled.call()}});return this}else if(typeof i==="string"&&i[0]!=="_"&&i!=="init"){var a;this.each(function(){var o=e.data(this,"_"+t);if(o instanceof l&&typeof o[i]==="function"){a=o[i].apply(o,Array.prototype.slice.call(s,1))}});return a!==undefined?a:this}};e.fn.commonParents=function(){var t=this;return t.first().parents().filter(function(){return e(this).find(t).length===t.length})};e.fn.commonParent=function(){return e(this).commonParents().first()};function o(i){if(!e(i.target).parents().hasClass("jq-selectbox")&&i.target.nodeName!=="OPTION"){if(e("div.jq-selectbox.opened").length){var s=e("div.jq-selectbox.opened"),l=e("div.jq-selectbox__search input",s),a=e("div.jq-selectbox__dropdown",s),o=s.find("select").data("_"+t).options;o.onSelectClosed.call(s);if(l.length){l.val("").keyup()}a.hide().find("li.sel").addClass("selected");s.removeClass("focused opened dropup dropdown")}}}o.registered=false});